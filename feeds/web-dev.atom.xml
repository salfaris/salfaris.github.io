<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Salman Faris - web-dev</title><link href="https://salfaris.me/" rel="alternate"></link><link href="https://salfaris.me/feeds/web-dev.atom.xml" rel="self"></link><id>https://salfaris.me/</id><updated>2021-06-13T23:14:00+01:00</updated><entry><title>Plotly.py main theme in Plotly.js</title><link href="https://salfaris.me/blog/2021-06-13-plotly-py-main-theme-in-plotly-js.html" rel="alternate"></link><published>2021-06-13T23:14:00+01:00</published><updated>2021-06-13T23:14:00+01:00</updated><author><name>Salman Faris</name></author><id>tag:salfaris.me,2021-06-13:/blog/2021-06-13-plotly-py-main-theme-in-plotly-js.html</id><summary type="html">&lt;p&gt;If you're like me who is used to using Plotly.py (i.e. Plotly Python) and then suddenly decided to use Plotly.js directly, you might immediately realize that there are some significant differences in terms of the plot design.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Plotly Python Plot" src="https://salfaris.me/blog/images/plotly_py_plot.png"&gt;&lt;/p&gt;
&lt;p&gt;For one, your default plot in Plotly.js has a â€¦&lt;/p&gt;</summary><content type="html">&lt;p&gt;If you're like me who is used to using Plotly.py (i.e. Plotly Python) and then suddenly decided to use Plotly.js directly, you might immediately realize that there are some significant differences in terms of the plot design.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Plotly Python Plot" src="https://salfaris.me/blog/images/plotly_py_plot.png"&gt;&lt;/p&gt;
&lt;p&gt;For one, your default plot in Plotly.js has a white background and not the steel blue colour as you would expect from a default Plotly.py plot. The reason is that the plots produced in the python version of Plotly come prepackaged with nice out-of-the-box themes. For example, the plot image above is a Plotly.py scatter plot with the default &lt;em&gt;plotly&lt;/em&gt; template. So how do we reproduce these themes inside of Plotly.js?&lt;/p&gt;
&lt;p&gt;Diving deeper into the Plotly documentation, I discovered that you can actually get the "theme settings" for the Plotly.py templates with just 4 lines of Python code.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;plotly.io&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pio&lt;/span&gt;
&lt;span class="n"&gt;template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;plotly&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;plotly_template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pio&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;templates&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;plotly_template&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layout&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;The Python code above prints the "theme settings" of the plot or in proper Plotly lingo, the plot &lt;strong&gt;layout&lt;/strong&gt; settings. In our particular case above where we set &lt;code&gt;template = "plotly"&lt;/code&gt;, we get the default plotly theme layout settings:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;Layout&lt;/span&gt;&lt;span class="p"&gt;({&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;annotationdefaults&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;arrowcolor&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;#2a3f5f&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;arrowhead&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;arrowwidth&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;autotypenumbers&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;strict&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;coloraxis&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;colorbar&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;outlinewidth&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ticks&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}},&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;span class="p"&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As you can see, it is in serialized JSON format. The idea now then is to deserialize this layout settings into a JavaScript object literal and pass it into the layout of your plot in Plotly.js. I did the deserialize process manually because I cannot find a way to automate this process (I would love to hear if you are able to do it!). For the default plotly theme, the JavaScript object literal is given below:&lt;/p&gt;
&lt;div class="gist"&gt;
    &lt;script src='https://gist.github.com/0995e0808a22aca8f4afb5faeb4d79c7.js'&gt;&lt;/script&gt;
    &lt;noscript&gt;
        &lt;pre&gt;&lt;code&gt;const defaultPlotlyLayout = {
  annotationdefaults: { arrowcolor: "#2a3f5f", arrowhead: 0, arrowwidth: 1 },
  autotypenumbers: "strict",
  coloraxis: { colorbar: { outlinewidth: 0, ticks: "" } },
  colorscale: {
    diverging: [
      [0, "#8e0152"],
      [0.1, "#c51b7d"],
      [0.2, "#de77ae"],
      [0.3, "#f1b6da"],
      [0.4, "#fde0ef"],
      [0.5, "#f7f7f7"],
      [0.6, "#e6f5d0"],
      [0.7, "#b8e186"],
      [0.8, "#7fbc41"],
      [0.9, "#4d9221"],
      [1, "#276419"],
    ],
    sequential: [
      [0.0, "#0d0887"],
      [0.1111111111111111, "#46039f"],
      [0.2222222222222222, "#7201a8"],
      [0.3333333333333333, "#9c179e"],
      [0.4444444444444444, "#bd3786"],
      [0.5555555555555556, "#d8576b"],
      [0.6666666666666666, "#ed7953"],
      [0.7777777777777778, "#fb9f3a"],
      [0.8888888888888888, "#fdca26"],
      [1.0, "#f0f921"],
    ],
    sequentialminus: [
      [0.0, "#0d0887"],
      [0.1111111111111111, "#46039f"],
      [0.2222222222222222, "#7201a8"],
      [0.3333333333333333, "#9c179e"],
      [0.4444444444444444, "#bd3786"],
      [0.5555555555555556, "#d8576b"],
      [0.6666666666666666, "#ed7953"],
      [0.7777777777777778, "#fb9f3a"],
      [0.8888888888888888, "#fdca26"],
      [1.0, "#f0f921"],
    ],
  },
  colorway: [
    "#636efa",
    "#EF553B",
    "#00cc96",
    "#ab63fa",
    "#FFA15A",
    "#19d3f3",
    "#FF6692",
    "#B6E880",
    "#FF97FF",
    "#FECB52",
  ],
  font: { color: "#2a3f5f" },
  geo: {
    bgcolor: "white",
    lakecolor: "white",
    landcolor: "#E5ECF6",
    showlakes: true,
    showland: true,
    subunitcolor: "white",
  },
  hoverlabel: { align: "left" },
  hovermode: "closest",
  mapbox: { style: "light" },
  paper_bgcolor: "white",
  plot_bgcolor: "#E5ECF6",
  polar: {
    angularaxis: { gridcolor: "white", linecolor: "white", ticks: "" },
    bgcolor: "#E5ECF6",
    radialaxis: { gridcolor: "white", linecolor: "white", ticks: "" },
  },
  scene: {
    xaxis: {
      backgroundcolor: "#E5ECF6",
      gridcolor: "white",
      gridwidth: 2,
      linecolor: "white",
      showbackground: true,
      ticks: "",
      zerolinecolor: "white",
    },
    yaxis: {
      backgroundcolor: "#E5ECF6",
      gridcolor: "white",
      gridwidth: 2,
      linecolor: "white",
      showbackground: true,
      ticks: "",
      zerolinecolor: "white",
    },
    zaxis: {
      backgroundcolor: "#E5ECF6",
      gridcolor: "white",
      gridwidth: 2,
      linecolor: "white",
      showbackground: true,
      ticks: "",
      zerolinecolor: "white",
    },
  },
  shapedefaults: { line: { color: "#2a3f5f" } },
  ternary: {
    aaxis: { gridcolor: "white", linecolor: "white", ticks: "" },
    baxis: { gridcolor: "white", linecolor: "white", ticks: "" },
    bgcolor: "#E5ECF6",
    caxis: { gridcolor: "white", linecolor: "white", ticks: "" },
  },
  title: { x: 0.05 },
  xaxis: {
    automargin: true,
    gridcolor: "white",
    linecolor: "white",
    ticks: "",
    title: { standoff: 15 },
    zerolinecolor: "white",
    zerolinewidth: 2,
  },
  yaxis: {
    automargin: true,
    gridcolor: "white",
    linecolor: "white",
    ticks: "",
    title: { standoff: 15 },
    zerolinecolor: "white",
    zerolinewidth: 2,
  },
};&lt;/code&gt;&lt;/pre&gt;
    &lt;/noscript&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: Stating the obvious but since the layout setting is extracted from the Plotly documentation, it is the hard work of the people behind Plotly. Thank you for the awesome theme!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The final step is to pass this layout into the layout parameter of the Plotly plot, and you get your favorite default Plotly.py theme again but now directly in Plotly.js!&lt;/p&gt;</content><category term="web-dev"></category><category term="javascript"></category><category term="plotly"></category><category term="python"></category></entry></feed>